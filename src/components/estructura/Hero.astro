---
import { basics } from '@/jsons/cv-AP.json';
import Section from '@/components/Section.astro';
import Code from '@/icons/Code.astro';
import WorldMap from '@/icons/WorldMap.astro';
import Mail from '@/icons/Mail.astro';
import Phone from '@/icons/Phone.astro';
import GitHub from '@/icons/GitHub.astro';
import LinkedIn from '@/icons/LinkedIn.astro';

const {
  name,
  alias,
  label,
  image,
  email,
  phone,
  location,
  profiles,
} = basics;
const { city, address, region } = location;

const SOCIAL_ICONS = {
  GitHub,
  LinkedIn,
};
---

<Section id="Hero" >
  <article class="container">
    <div class="info">
      <h1>{name} <Code/> {alias}</h1>
      <h2>{label}</h2>
      <span>
        <WorldMap />
        {city} - {address}, {region}
      </span>
      <footer class="notPrint">
        {
          email && (
            <a
              href={`mailto:${email}`}
              title={`Contacte con ${alias} mediante el correo ${email}`}
              target="_blank"
            >
              <Mail />
            </a>
          )
        }
        {
          phone && (
            <a
              href={`tel:${phone}`}
              title={`Contacte con ${alias} mediante el numero ${phone}`}
              target="_blank"
              rel="noopener noreferrer"
            >
              <Phone />
            </a>
          )
        }
        {
          profiles.map(
            ({ network, usernam, url }) => {
              const Icon = SOCIAL_ICONS[network];
              return (
                <a
                  href={url}
                  title={`Visita el perfil de ${usernam} en ${network}`}
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <Icon />
                </a>
              );
            }
          )
        }
      </footer>
      <footer class="print">
        {
          email && (
            <span><Mail />{email}</span>
          )
        }
        {
          phone && (
            <span><Phone />{phone}</span>
          )
        }
        {
          profiles.map(
            ({ network, url }) => {
              const Icon = SOCIAL_ICONS[network];
              return (
                <span><Icon />{url}</span>
              );
            }
          )
        }
      </footer>
    </div>
    <figure>
      <dir>
        <img src={image} alt={alias} />
      </dir>
      <img src="./DAQM3D.jpg" alt={alias} />
      <h2>DAQM3D</h2>
    </figure>
  </article>
</Section>

<style>

  
  .container {
    display: grid;
    grid-template-columns: 4fr 1fr;
    justify-content: space-between;
    gap: 1rem;
    .info {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      h1 {
        font-size: 1.8rem;
        svg{
          margin: auto 5px;  
        }
      }
      :is(h1:hover) svg{
        animation: 1.5s infinite alternate DAQM3D
      }
      
      h2 {
        color: #444;
        font-weight: 500;
        font-size: 1rem;
      }
      span {
        color: #666;
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.85rem;
        letter-spacing: -0.05rem;
    }
  }
  

  footer {
    display: flex;
    gap: 4px;
    margin-top: 8px;
    a {
      padding: 5px;
      display: inline-flex;
      border: 1.5px solid #cfcfcfcb;
      border-radius: 5px;
      transition: background .3s ease-in-out, border .5s ease-in-out;
    }
    a:hover {
      background: #5bfa5b;
      border: 1.5px solid #18193f;
      svg{
        animation: 1s linear  social;
      }
    }
  }
  figure{
    position: relative;
    width: 128px;
    height: 160px;
    >img{
      position: absolute;
      top: 0;
      left: 0;
      z-index: 10;
      opacity: 0;
      width: 100%;
      height: 90%;
      object-fit: cover;
      border-radius: 50%;
      
      transform: translateY(0);
      transition: .5s;
    }
    > h2{
      position: absolute;
      bottom: 10px;
      left: 70%;
      transform: translateX(-50%);
      color: #fafafa;
      font-size: 1rem;
      background: #5bfa5b;
      width: 80%;
      text-align: center;
      padding: 5px 10px;
      border-radius: 10px;
      opacity: 0;
    }
    
    dir{
      width: 100%;
      height: 100%;
      inset:0;
      background-color: #222;
      border-radius: 15px;
    
      img{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%; 
        height: 100%;
        object-fit: cover;
        transition: .5s;
        border-radius:inherit;
      }
    }
  }
  figure:hover dir img{
    opacity: 0;
  }
  figure:hover > img{
    opacity: 1;
    transform: translateY(-25%)
  }
  figure:hover > h2{
      opacity: 1;
    }
@media print {
  footer.print{
    display: grid;
    grid-template-columns: repeat( auto-fit,minmax(200px,1fr));
    gap: .5rem 1rem;
  }
}
</style>